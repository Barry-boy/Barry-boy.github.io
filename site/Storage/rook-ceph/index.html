
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Project documentation with Markdown.">
      
      
        <meta name="author" content="Li">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>rook-ceph简介 - Kubernetes 进阶训练营</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,300i,400,400i,700,700i%7CUbuntu+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Ubuntu";--md-code-font:"Ubuntu Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../assets/styles/atom-one-light.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rook-ceph" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="Kubernetes 进阶训练营" class="md-header__button md-logo" aria-label="Kubernetes 进阶训练营" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kubernetes 进阶训练营
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              rook-ceph简介
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="切换暗色主题"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="切换暗色主题" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="切换亮色主题"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="切换亮色主题" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/lixie021/lixie021.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      首页
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../ubuntu/ubuntu-bmc/" class="md-tabs__link">
        操作系统
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../docker/docker-docs/" class="md-tabs__link">
        容器运行时
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../basic/cncf/" class="md-tabs__link">
        基础
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../k3s/k3s-install/" class="md-tabs__link">
        K3S
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../k8s/mysql-operator/1-install-mysql-operator/" class="md-tabs__link">
        数据库
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../network/ZeroTier/" class="md-tabs__link">
        网络
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="./" class="md-tabs__link md-tabs__link--active">
        存储
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../vm/promox/" class="md-tabs__link">
        虚拟化
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Devops/github/" class="md-tabs__link">
        Devops
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../ansible/ansible-case1/" class="md-tabs__link">
        Ansible自动化
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Helm/helm-install/" class="md-tabs__link">
        Helm
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../error/tjtu/" class="md-tabs__link">
        排错技巧
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Macuse/mac-easy/" class="md-tabs__link">
        使用技巧
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../mylife/life-docs1/" class="md-tabs__link">
        工作生活
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Kubernetes 进阶训练营" class="md-nav__button md-logo" aria-label="Kubernetes 进阶训练营" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Kubernetes 进阶训练营
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/lixie021/lixie021.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        首页
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          操作系统
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="操作系统" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          操作系统
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ubuntu/ubuntu-bmc/" class="md-nav__link">
        Linux 带外管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ubuntu/1-system-docs/" class="md-nav__link">
        Linux 系统管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ubuntu/network/1-network-docs/" class="md-nav__link">
        Linux 网络服务
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          容器运行时
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="容器运行时" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          容器运行时
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/docker-docs/" class="md-nav__link">
        Docker 基本管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/lxcfs.md" class="md-nav__link">
        lxcfs 介绍
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          基础
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="基础" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          基础
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basic/cncf/" class="md-nav__link">
        云原生简介
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../k8s/base/k8s-overview/" class="md-nav__link">
        K8S简介
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basic/3-k8s-systeminit-docs/" class="md-nav__link">
        集群部署
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basic/k8s-update/" class="md-nav__link">
        K8S升级
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basic/etcd/" class="md-nav__link">
        ETCD备份还原
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../k8s/yaml/yaml/" class="md-nav__link">
        资源清单
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cks/cka/" class="md-nav__link">
        CKA考题
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basic/5-kubernetes-UI-docs/" class="md-nav__link">
        Kuberneses UI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basic/4-ansible-install-k8s/" class="md-nav__link">
        项目一
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          K3S
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="K3S" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          K3S
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../k3s/k3s-install/" class="md-nav__link">
        K3S安装
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6">
          数据库
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="数据库" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          数据库
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../k8s/mysql-operator/1-install-mysql-operator/" class="md-nav__link">
        Mysql-operator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7">
          网络
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="网络" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          网络
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../network/ZeroTier/" class="md-nav__link">
        ZeroTier组网
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../network/frp/" class="md-nav__link">
        frp 内网穿透
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../network/3-network-docs/" class="md-nav__link">
        kubernetes 网络组件
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../network/4-network-docs/" class="md-nav__link">
        科学上网
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8">
          存储
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="存储" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          存储
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          rook-ceph简介
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        rook-ceph简介
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rook-ceph_1" class="md-nav__link">
    rook-ceph简介
  </a>
  
    <nav class="md-nav" aria-label="rook-ceph简介">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ceph" class="md-nav__link">
    ceph 的版本历史
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ceph_1" class="md-nav__link">
    ceph集群角色定义
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rook-ceph_2" class="md-nav__link">
    rook-ceph部署
  </a>
  
    <nav class="md-nav" aria-label="rook-ceph部署">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    普通测试部署：
  </a>
  
    <nav class="md-nav" aria-label="普通测试部署：">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crdscommonoperator" class="md-nav__link">
    部署crds，common，operator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    镜像列表：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#csi" class="md-nav__link">
    CSI获取镜像脚本：
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    定制化部署：
  </a>
  
    <nav class="md-nav" aria-label="定制化部署：">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mon" class="md-nav__link">
    定制mon调度参数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mgr" class="md-nav__link">
    定制mgr调度参数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#msd" class="md-nav__link">
    定制msd调度参数
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toolbox" class="md-nav__link">
    toolbox客户端
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#k8sceph" class="md-nav__link">
    k8s访问ceph
  </a>
  
    <nav class="md-nav" aria-label="k8s访问ceph">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-ceph-yum" class="md-nav__link">
    1. 配置Ceph yum源
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2ceph-common" class="md-nav__link">
    2.安装ceph-common
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-ceph" class="md-nav__link">
    3. 创建ceph配置文件
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rbd" class="md-nav__link">
    访问RBD块存储
  </a>
  
    <nav class="md-nav" aria-label="访问RBD块存储">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1pool" class="md-nav__link">
    1.创建一个pool
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-pool" class="md-nav__link">
    2. 在pool上创建块设备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3rbd" class="md-nav__link">
    3、客户挂载RBD块
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dashbaard" class="md-nav__link">
    Dashbaard 图形管理
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dashboard-ceph" class="md-nav__link">
    Dashboard 监控ceph
  </a>
  
    <nav class="md-nav" aria-label="Dashboard 监控ceph">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prometheus-operator" class="md-nav__link">
    部署Prometheus Operator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prometheus-instances" class="md-nav__link">
    部署Prometheus Instances
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    对象存储
  </a>
  
    <nav class="md-nav" aria-label="对象存储">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rgw" class="md-nav__link">
    部署RGW对象存储
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rgw_1" class="md-nav__link">
    RGW高可用
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bucket" class="md-nav__link">
    创建Bucket
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    容器访问对象存储
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../osd/" class="md-nav__link">
        osd 性能测试
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pv-rep/" class="md-nav__link">
        pv/pvc简介
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rook-ceph-update/" class="md-nav__link">
        rook-ceph 版本升级
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Juicefs/" class="md-nav__link">
        Juicefs存储
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../5-dev-docs/" class="md-nav__link">
        ceph 存储修复
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" checked>
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_9">
          虚拟化
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="虚拟化" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          虚拟化
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vm/promox/" class="md-nav__link">
        Proxmox虚拟化
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" checked>
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_10">
          Devops
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Devops" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Devops
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Devops/github/" class="md-nav__link">
        Github
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Devops/3-github-docs/" class="md-nav__link">
        Google 浏览器扩展
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" checked>
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_11">
          Ansible自动化
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Ansible自动化" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Ansible自动化
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ansible/ansible-case1/" class="md-nav__link">
        Ansible 应用基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ansible/ansible-docs2/" class="md-nav__link">
        Ansible 高级用法
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" checked>
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_12">
          Helm
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Helm" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Helm
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Helm/helm-install/" class="md-nav__link">
        Helm 简介与安装
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Helm/helm/" class="md-nav__link">
        Helm 配置grafana
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" checked>
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_13">
          排错技巧
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="排错技巧" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          排错技巧
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../error/tjtu/" class="md-nav__link">
        天津集群
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../error/dev/" class="md-nav__link">
        Dev环境集群
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_14" type="checkbox" id="__nav_14" checked>
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_14">
          使用技巧
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="使用技巧" data-md-level="1">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          使用技巧
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Macuse/mac-easy/" class="md-nav__link">
        Mac 小功能
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Macuse/mac-usb-system/" class="md-nav__link">
        Mac 制作ubuntu系统盘
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Macuse/mac-vscode/" class="md-nav__link">
        Mac vscode使用技巧
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_15" type="checkbox" id="__nav_15" checked>
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_15">
          工作生活
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="工作生活" data-md-level="1">
        <label class="md-nav__title" for="__nav_15">
          <span class="md-nav__icon md-icon"></span>
          工作生活
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mylife/life-docs1/" class="md-nav__link">
        我的2021
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rook-ceph_1" class="md-nav__link">
    rook-ceph简介
  </a>
  
    <nav class="md-nav" aria-label="rook-ceph简介">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ceph" class="md-nav__link">
    ceph 的版本历史
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ceph_1" class="md-nav__link">
    ceph集群角色定义
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rook-ceph_2" class="md-nav__link">
    rook-ceph部署
  </a>
  
    <nav class="md-nav" aria-label="rook-ceph部署">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    普通测试部署：
  </a>
  
    <nav class="md-nav" aria-label="普通测试部署：">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crdscommonoperator" class="md-nav__link">
    部署crds，common，operator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    镜像列表：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#csi" class="md-nav__link">
    CSI获取镜像脚本：
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    定制化部署：
  </a>
  
    <nav class="md-nav" aria-label="定制化部署：">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mon" class="md-nav__link">
    定制mon调度参数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mgr" class="md-nav__link">
    定制mgr调度参数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#msd" class="md-nav__link">
    定制msd调度参数
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toolbox" class="md-nav__link">
    toolbox客户端
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#k8sceph" class="md-nav__link">
    k8s访问ceph
  </a>
  
    <nav class="md-nav" aria-label="k8s访问ceph">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-ceph-yum" class="md-nav__link">
    1. 配置Ceph yum源
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2ceph-common" class="md-nav__link">
    2.安装ceph-common
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-ceph" class="md-nav__link">
    3. 创建ceph配置文件
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rbd" class="md-nav__link">
    访问RBD块存储
  </a>
  
    <nav class="md-nav" aria-label="访问RBD块存储">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1pool" class="md-nav__link">
    1.创建一个pool
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-pool" class="md-nav__link">
    2. 在pool上创建块设备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3rbd" class="md-nav__link">
    3、客户挂载RBD块
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dashbaard" class="md-nav__link">
    Dashbaard 图形管理
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dashboard-ceph" class="md-nav__link">
    Dashboard 监控ceph
  </a>
  
    <nav class="md-nav" aria-label="Dashboard 监控ceph">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prometheus-operator" class="md-nav__link">
    部署Prometheus Operator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prometheus-instances" class="md-nav__link">
    部署Prometheus Instances
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    对象存储
  </a>
  
    <nav class="md-nav" aria-label="对象存储">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rgw" class="md-nav__link">
    部署RGW对象存储
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rgw_1" class="md-nav__link">
    RGW高可用
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bucket" class="md-nav__link">
    创建Bucket
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    容器访问对象存储
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/lixie021/lixie021.github.io/edit/master/docs/Storage/rook-ceph.md" title="编辑此页" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="rook-ceph"><strong>rook-ceph简介和部署</strong></h1>
<h2 id="rook-ceph_1"><strong>rook-ceph简介</strong></h2>
<p>开源的分布式存储系统，支持对象存储，块设备，文件系统</p>
<ul>
<li>块存储</li>
<li>CephFs </li>
<li>对象存储</li>
</ul>
<h3 id="ceph">ceph 的版本历史</h3>
<ul>
<li>
<p>x.0.z - 开发版</p>
</li>
<li>
<p>x.1.z - 候选版</p>
</li>
<li>
<p>x.2.z - 稳定，修正版</p>
</li>
</ul>
<h3 id="ceph_1">ceph集群角色定义</h3>
<p>!!! info "注意"
    ceph集群的osd节点一般保证&gt;=3个，来保证数据的高可用性。</p>
<p>mon : ceph 监视器,在一个主机上运行的一个守护进程，用于维护集群状态映射关系</p>
<p>mgr : 负责跟踪运行时指标和ceph集群的当前状态</p>
<p>osd : 磁盘（真正存储数据的地方）</p>
<p>!!! note "ceph 面试题"
    ceph</p>
<h2 id="rook-ceph_2"><strong>rook-ceph部署</strong></h2>
<p>!!! info "环境要求"
    一个k8s集群，node节点最少三个节点</p>
<p>mon: 8C 8G/200G  16C 16g/32-200G</p>
<h3 id="_1"><strong>普通测试部署：</strong></h3>
<h4 id="crdscommonoperator">部署crds，common，operator</h4>
<pre><code>[ucloud] root@master0:~# git clone --single-branch --branch v1.5.5 https://github.com/rook/rook.git

cd rook/cluster/examples/kubernetes/ceph
kubectl create -f crds.yaml -f common.yaml -f operator.yaml
kubectl create -f cluster.yaml
</code></pre>
<h4 id="_2">镜像列表：</h4>
<pre><code>  # ROOK_CSI_CEPH_IMAGE: &quot;quay.io/cephcsi/cephcsi:v3.4.0&quot;
  # ROOK_CSI_REGISTRAR_IMAGE: &quot;k8s.gcr.io/sig-storage/csi-node-driver-registrar:v2.3.0&quot;
  # ROOK_CSI_RESIZER_IMAGE: &quot;k8s.gcr.io/sig-storage/csi-resizer:v1.3.0&quot;
  # ROOK_CSI_PROVISIONER_IMAGE: &quot;k8s.gcr.io/sig-storage/csi-provisioner:v3.0.0&quot;
  # ROOK_CSI_SNAPSHOTTER_IMAGE: &quot;k8s.gcr.io/sig-storage/csi-snapshotter:v4.2.0&quot;
  # ROOK_CSI_ATTACHER_IMAGE: &quot;k8s.gcr.io/sig-storage/csi-attacher:v3.3.0&quot;
</code></pre>
<h4 id="csi">CSI获取镜像脚本：</h4>
<pre><code class="language-shell">[ucloud] root@node0:/home/lixie# cat &lt;&lt;EOF&gt;&gt; image-sci.sh
#!/bin/bash

image_list='
csi-node-driver-registrar:v2.0.1
csi-attacher:v3.0.0
csi-snapshotter:v3.0.0
csi-resizer:v1.0.0
csi-provisioner:v2.0.0
'

aliyuncs=&quot;registry.aliyuncs.com/it00021hot&quot;
google_gcr=&quot;k8s.gcr.io/sig-storage&quot;
for image in $image_list
do
  echo $image
  docker  pull ${aliyuncs}/${image}
  docker  tag ${aliyuncs}/${image} ${google_gcr}/${image}
  docker  rm ${aliyuncs}/${image}
  #echo &quot;${aliyuncs}/${image} ${google_gcr}/${image} downloaded.&quot;
done

EOF
</code></pre>
<h3 id="_3"><strong>定制化部署：</strong></h3>
<h4 id="mon"><strong>定制mon调度参数</strong></h4>
<p>!!! info "背景"
    ⽣产环境有⼀些专⻔的节点⽤于mon、mgr，存储节点节点使⽤单独的节点承担,利⽤调度机制实
    现</p>
<pre><code class="language-yaml">  placement:
    mon:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchExpressions:
            - key: ceph-mon
              operator: In
              values:
              - enabled

#设置磁盘的参数，调整为false，⽅便后⾯定制
214     useAllNodes: false
215     useAllDevices: false
</code></pre>
<p>分别给节点打上标签</p>
<pre><code>[ucloud] root@master0:~# kubectl label node node0 ceph-mon=enabled
node/node0 labeled
[ucloud] root@master0:~# kubectl label node node1 ceph-mon=enabled
node/node1 labeled
[ucloud] root@master0:~# kubectl label node node2 ceph-mon=enabled
node/node2 labeled
</code></pre>
<p>获取镜像脚本</p>
<pre><code>$ cat image-rook-ceph-sci-v1.7.11.sh
#!/bin/bash

image_list='
 csi-node-driver-registrar:v2.0.1
 csi-attacher:v3.0.0
 csi-snapshotter:v3.0.0
 csi-resizer:v1.0.0
 csi-provisioner:v2.0.0
'

aliyuncs=&quot;registry.aliyuncs.com/it00021hot&quot;
google_gcr=&quot;k8s.gcr.io/sig-storage&quot;
for image in $image_list
do
  echo $image
  docker  pull ${aliyuncs}/${image}
  docker  tag ${aliyuncs}/${image} ${google_gcr}/${image}
  #docker  rm ${aliyuncs}/${image}
  #echo &quot;${aliyuncs}/${image} ${google_gcr}/${image} downloaded.&quot;
done

EOF
</code></pre>
<h4 id="mgr"><strong>定制mgr调度参数</strong></h4>
<p>!!! info "温馨提示"
    修改mgr的调度参数,修改完之后重新apply cluster.yaml配置使其加载到集群中</p>
<pre><code class="language-yaml">    mgr:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchExpressions:
            - key: ceph-mgr
              operator: In
              values:
              - enabled
</code></pre>
<p>此时调度会失败，给node-1和node-2打上 <code>ceph-mgr=enabled</code> 的标签</p>
<pre><code>$ kubectl label nodes node0 ceph-mgr=enabled
node/node0 labeled
$ kubectl label nodes node1 ceph-mgr=enabled
node/node1 labeled
</code></pre>
<h4 id="msd"><strong>定制msd调度参数</strong></h4>
<p>设置osd的调度参数</p>
<pre><code class="language-yaml">    osd:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchExpressions:
            - key: ceph-osd
              operator: In
              values:
              - enabled
</code></pre>
<p>定制osd的磁盘参数</p>
<pre><code class="language-yaml">    nodes:
    - name: &quot;node0&quot;
      devices: # specific devices to use for storage can be specified for each node
      - name: &quot;vdb&quot;
    - name: &quot;node1&quot;
      devices: # specific devices to use for storage can be specified for each node
      - name: &quot;vdc&quot;
</code></pre>
<h3 id="toolbox"><strong>toolbox客户端</strong></h3>
<p>apply以下中两个文件的一个就可以，一般选择toolbox.yaml </p>
<pre><code>$ ll tool*
-rw-r--r--  1 beiyiwangdejiyi  staff   1.7K  7 19 17:26 toolbox-job.yaml     # 一次性任务
-rw-r--r--  1 beiyiwangdejiyi  staff   1.4K  7 19 17:26 toolbox.yaml   

kubectl apply -f toolbox.yaml
</code></pre>
<h3 id="k8sceph"><strong>k8s访问ceph</strong></h3>
<ul>
<li>centos系统：</li>
</ul>
<h4 id="1-ceph-yum"><strong>1. 配置Ceph yum源</strong></h4>
<pre><code>[root@node-1 ~]# cat /etc/yum.repos.d/ceph.repo
[ceph]
name=ceph
baseurl=https://mirrors.aliyun.com/ceph/rpm-octopus/el8/x86_64/
enabled=1
gpgcheck=0
</code></pre>
<h4 id="2ceph-common"><strong>2.安装ceph-common</strong></h4>
<pre><code>[root@node-1 ~]# yum -y install ceph-common
</code></pre>
<h4 id="3-ceph"><strong>3. 创建ceph配置文件</strong></h4>
<pre><code>[root@rook-ceph-tools-65c94d77bb-b9b2h /]# cat /etc/ceph/ceph.conf    # 查看之后宿主机创建
[global]
mon_host = 10.43.248.216:6789,10.43.174.200:6789,10.43.9.21:6789

[client.admin]
keyring = /etc/ceph/keyring
[root@rook-ceph-tools-65c94d77bb-b9b2h /]# cat /etc/ceph/keyring      # 查看之后宿主机创建
[client.admin]
key = AQCRS+NijUeiIxAAhFtv6je2FmMEAVHAJJqPwg==
</code></pre>
<ul>
<li>ubuntu系统：</li>
</ul>
<pre><code>apt install ceph-common
</code></pre>
<h3 id="rbd"><strong>访问RBD块存储</strong></h3>
<h4 id="1pool">1.创建一个pool</h4>
<pre><code class="language-yaml">[root@rook-ceph-tools-65c94d77bb-xg6xs /]# ceph osd pool create rook 16 16
pool 'rook' created

[root@rook-ceph-tools-65c94d77bb-xg6xs /]# ceph osd lspools     # 查看pools
1 device_health_metrics
2 replicapool
3 rook
</code></pre>
<h4 id="2-pool">2. 在pool上创建块设备</h4>
<pre><code class="language-yaml">[root@rook-ceph-tools-65c94d77bb-xg6xs /]# rbd create -p rook --image rook-rbd.img --size 10G
[root@rook-ceph-tools-65c94d77bb-xg6xs /]# rbd ls -p rook                   
rook-rbd.img
[root@rook-ceph-tools-65c94d77bb-xg6xs /]# rbd info rook/rook-rbd.img       # 查看详细信息
rbd image 'rook-rbd.img':
    size 10 GiB in 2560 objects
    order 22 (4 MiB objects)
    snapshot_count: 0
    id: 50a7fcf85890
    block_name_prefix: rbd_data.50a7fcf85890
    format: 2
    features: layering
    op_features:
    flags:
    create_timestamp: Fri Jul 29 05:40:05 2022
    access_timestamp: Fri Jul 29 05:40:05 2022
    modify_timestamp: Fri Jul 29 05:40:05 2022
</code></pre>
<h4 id="3rbd">3、客户挂载RBD块</h4>
<pre><code class="language-shell">[ucloud] root@master0:/home/lixie# rbd map rook/rook-rbd.img
/dev/rbd0

[ucloud] root@master0:/home/lixie# rbd showmapped
id  pool  namespace  image         snap  device
0   rook             rook-rbd.img  -     /dev/rbd0
[ucloud] root@master0:/home/lixie# mkfs.xfs /dev/rbd0
meta-data=/dev/rbd1              isize=512    agcount=16, agsize=163840 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=1        finobt=1, sparse=1, rmapbt=0
         =                       reflink=1
data     =                       bsize=4096   blocks=2621440, imaxpct=25
         =                       sunit=16     swidth=16 blks
naming   =version 2              bsize=4096   ascii-ci=0, ftype=1
log      =internal log           bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=16 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0

</code></pre>
<p>!!! bug "问题一：加载 rbd 内核模块失败"
    <code>[root@rook-ceph-tools-65c94d77bb-xg6xs /]# rbd map rook/rook-rbd.img
    modinfo: ERROR: Module alias rbd not found.
    modprobe: FATAL: Module rbd not found in directory /lib/modules/5.4.0-48-generic
    rbd: failed to load rbd kernel module (1)
    rbd: failed to set udev buffer size: (1) Operation not permitted
    rbd: sysfs write failed
    In some cases useful info is found in syslog - try "dmesg | tail".
    rbd: map failed: (2) No such file or directory</code>
解决方法：</p>
<pre><code>[ucloud] root@node0:/home/lixie# modprobe rbd
[ucloud] root@node0:/home/lixie# lsmod |grep rbd
rbd                   106496  0
libceph               327680  1 rbd
</code></pre>
<p>!!! warning "问题二：map rdb "
    <code>[root@rook-ceph-tools-65c94d77bb-b9b2h /]# rbd map rook/rook-rbd.img
    rbd: failed to set udev buffer size: (1) Operation not permitted
    rbd: sysfs write failed
    In some cases useful info is found in syslog - try "dmesg | tail".</code></p>
<p>解决方法：
  在宿主机上执行，该命令。</p>
<p>!!! warning "问题三: 内核模块不支持这么多的特性"
    <code>[dev] root@master0:/home/lixie# rbd map rook/rook-rbd1.img
    rbd: sysfs write failed
    RBD image feature set mismatch. You can disable features unsupported by the kernel with "rbd feature disable rook/rook-rbd1.img object-map fast-diff deep-flatten".
    In some cases useful info is found in syslog - try "dmesg | tail".
    rbd: map failed: (6) No such device or address</code></p>
<p>解决方法：</p>
<pre><code class="language-shell">rbd feature disable rook/rook-rbd1.img object-map fast-diff deep-flatten    # 按照他的提示，先禁止这些特性再map
</code></pre>
<h3 id="dashbaard"><strong>Dashbaard 图形管理</strong></h3>
<p>!!! warning "温馨提示"
    注意需要将主机暴漏端口的安全组打开，安全组打开 31926 端口</p>
<p>启⽤之后，可以看到rook-ceph-mgr-dashboard-external-http的service，其类型是NodePort，</p>
<pre><code class="language-yaml">/Users/beiyiwangdejiyi/k8s-data/rook-v1.6.11/cluster/examples/kubernetes/ceph
k apply -f dashboard-external-http.yaml

$ k get svc -n rook-ceph
NAME                                    TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)             AGE
csi-cephfsplugin-metrics                ClusterIP   10.97.7.142    &lt;none&gt;        8080/TCP,8081/TCP   579d
csi-rbdplugin-metrics                   ClusterIP   10.97.0.194    &lt;none&gt;        8080/TCP,8081/TCP   579d
rook-ceph-mgr                           ClusterIP   10.97.15.77    &lt;none&gt;        9283/TCP            579d
rook-ceph-mgr-dashboard                 ClusterIP   10.97.4.98     &lt;none&gt;        7000/TCP            579d
rook-ceph-mgr-dashboard-external-http   NodePort    10.97.10.172   &lt;none&gt;        7000:31926/TCP      8m18s  
</code></pre>
<p>默认mgr创建了⼀个admin的⽤户，其密码存放在rook-ceph-dashboard-password的secrets对象中，通过如下⽅式可以获取到</p>
<pre><code class="language-yaml">kubectl get secrets -n rook-ceph rook-ceph-dashboard-password -oyaml
apiVersion: v1
data:
  password: XTBndS0iREN1bE9UMGpQY2JQSSE=   # 采用base64加密 
kind: Secret
metadata:
  creationTimestamp: &quot;2020-12-16T18:01:16Z&quot;
  name: rook-ceph-dashboard-password
  namespace: rook-ceph
  ownerReferences:
  - apiVersion: ceph.rook.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: CephCluster
    name: rook-ceph
    uid: ee10d125-4428-4e88-983a-53190bc3411c
  resourceVersion: &quot;103972533&quot;
  uid: 7082d4ad-47bb-46e2-b439-624016cc5f81
type: kubernetes.io/rook
</code></pre>
<p>base64 解密</p>
<pre><code>$ echo XTBndS0iREN1bE9UMGpQY2JQSSE=  | base64 -d
]0gu-&quot;DCulOT0jPcbPI!%
</code></pre>
<p>!!! success "测试登陆"
    - URL: http://106.75.119.241:31926/ 
    - 帐号: admin 
    - 密码: ]0gu-"DCulOT0jPcbPI! </p>
<p>进入就可以看到一下界面</p>
<p><img alt="ceph" src="/Users/beiyiwangdejiyi/hugo/docs/src/ceph-dashboard.png" /></p>
<h3 id="dashboard-ceph"><strong>Dashboard 监控ceph</strong></h3>
<pre><code>$ k get svc -n rook-ceph
NAME                                    TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)             AGE
csi-cephfsplugin-metrics                ClusterIP   10.97.7.142    &lt;none&gt;        8080/TCP,8081/TCP   580d
csi-rbdplugin-metrics                   ClusterIP   10.97.0.194    &lt;none&gt;        8080/TCP,8081/TCP   580d
rook-ceph-mgr                           ClusterIP   10.97.15.77    &lt;none&gt;        9283/TCP            580d # 给prometheus作为客户端使用的
......
</code></pre>
<h4 id="prometheus-operator"><strong>部署Prometheus Operator</strong></h4>
<pre><code>kubectl apply -f https://raw.githubusercontent.com/coreos/prometheus-operator/v0.40.0/bundle.yaml
</code></pre>
<p>确认prometheus-operator处于run状态</p>
<pre><code>$ k get pod
prometheus-operator-7ccf6dfc8-d9dmm             1/1     Running   0          142
</code></pre>
<h4 id="prometheus-instances"><strong>部署Prometheus Instances</strong></h4>
<pre><code>$ git clone --single-branch --branch v1.6.11 https://github.com/rook/rook.git
cd rook/cluster/examples/kubernetes/ceph/monitoring
</code></pre>
<p>创建服务监视器以及 Prometheus 服务器 pod 和服务</p>
<pre><code>kubectl create -f service-monitor.yaml
kubectl create -f prometheus.yaml
kubectl create -f prometheus-service.yaml
</code></pre>
<p>本地测试访问：</p>
<pre><code>$ k port-forward pod/prometheus-rook-prometheus-0 -n rook-ceph  9090 9090

访问：http://localhost:9090/
</code></pre>
<p>grafana测试访问：</p>
<pre><code>$ k port-forward pod/grafana-cc568dbd8-4nvlq -n infra  3000 80

访问：http://localhost:3000/
帐号：admin
密码：strongpassword
</code></pre>
<p>!!! info "监控展板"
    - Ceph - Cluster：https://grafana.com/grafana/dashboards/2842
    - Ceph - OSD ： https://grafana.com/grafana/dashboards/5336
    - Ceph - Pools： https://grafana.com/grafana/dashboards/5342</p>
<h3 id="_4"><strong>对象存储</strong></h3>
<h4 id="rgw"><strong>部署RGW对象存储</strong></h4>
<pre><code class="language-shell">$ k apply -f object.yaml

[ucloud] root@master0:~/.kube# kubectl  get svc -n rook-ceph
NAME                       TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)             AGE
csi-rbdplugin-metrics      ClusterIP   10.43.40.164    &lt;none&gt;        8080/TCP,8081/TCP   7d4h
csi-cephfsplugin-metrics   ClusterIP   10.43.170.151   &lt;none&gt;        8080/TCP,8081/TCP   7d4h
rook-ceph-mon-a            ClusterIP   10.43.248.216   &lt;none&gt;        6789/TCP,3300/TCP   7d4h
rook-ceph-mon-b            ClusterIP   10.43.174.200   &lt;none&gt;        6789/TCP,3300/TCP   7d4h
rook-ceph-mon-c            ClusterIP   10.43.9.21      &lt;none&gt;        6789/TCP,3300/TCP   7d4h
rook-ceph-mgr-dashboard    ClusterIP   10.43.193.31    &lt;none&gt;        8443/TCP            7d4h
rook-ceph-mgr              ClusterIP   10.43.114.15    &lt;none&gt;        9283/TCP            7d4h
wordpress-mysql            ClusterIP   None            &lt;none&gt;        3306/TCP            7d3h
rook-prometheus            NodePort    10.43.128.1     &lt;none&gt;        9090:30900/TCP      3d
prometheus-operated        ClusterIP   None            &lt;none&gt;        9090/TCP            3d
rook-ceph-rgw-my-store     ClusterIP   10.43.73.235    &lt;none&gt;        80/TCP              18m
[ucloud] root@master0:~/.kube# curl http://10.43.73.235
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;ListAllMyBucketsResult xmlns=&quot;http://s3.amazonaws.com/doc/2006-03-01/&quot;&gt;&lt;Owner&gt;&lt;ID&gt;anonymous&lt;/ID&gt;&lt;DisplayName&gt;&lt;/DisplayName&gt;&lt;/Owner&gt;&lt;Buckets&gt;&lt;/Buckets&gt;&lt;/ListAllMyBucketsResult&gt;[ucloud] root@master0:~/.kube#
</code></pre>
<h4 id="rgw_1"><strong>RGW高可用</strong></h4>
<pre><code>$ vim object.yaml
 54     instances: 2
</code></pre>
<h4 id="bucket"><strong>创建Bucket</strong></h4>
<ul>
<li>创建storageclass</li>
</ul>
<pre><code class="language-shell">$ k apply -f storageclass-bucket-delete.yaml
storageclass.storage.k8s.io/rook-ceph-delete-bucket created

</code></pre>
<ul>
<li>创建bucket</li>
</ul>
<pre><code>$ k apply -f object-bucket-claim-delete.yaml
objectbucketclaim.objectbucket.io/ceph-delete-bucket created
</code></pre>
<h4 id="_5"><strong>容器访问对象存储</strong></h4>
<p>获取ceph-rgw的访问地址</p>
<pre><code class="language-yaml">$ k get cm ceph-delete-bucket -o yaml
apiVersion: v1
data:
  BUCKET_HOST: rook-ceph-rgw-my-store.rook-ceph.svc
  BUCKET_NAME: ceph-bkt-148b1fa5-7868-42e5-8135-383d357c41cd
  BUCKET_PORT: &quot;80&quot;
  BUCKET_REGION: us-east-1
  BUCKET_SUBREGION: &quot;&quot;
kind: ConfigMap
metadata:
  creationTimestamp: &quot;2022-08-05T08:24:27Z&quot;
  finalizers:
  - objectbucket.io/finalizer
  labels:
    bucket-provisioner: rook-ceph.ceph.rook.io-bucket
  name: ceph-delete-bucket
  namespace: rook-ceph
  ownerReferences:
  - apiVersion: objectbucket.io/v1alpha1
    blockOwnerDeletion: true
    controller: true
    kind: ObjectBucketClaim
    name: ceph-delete-bucket
    uid: a8c69ebc-1e4d-477c-97e7-479b532962b3
  resourceVersion: &quot;1282724&quot;
  uid: 26786f4b-9371-46fa-8ca9-f470e5e92cb2
</code></pre>
<p>拿到secrets</p>
<pre><code class="language-yaml">$ k get secrets  ceph-delete-bucket -o yaml
apiVersion: v1
data:
  AWS_ACCESS_KEY_ID: Rk9JSjBJNlg0NDVNUVVMVkpGMzc=
  AWS_SECRET_ACCESS_KEY: SVdjaElaeVdUbTNGNkRyZ29UcUQ0R1gzOVlhczR4S1ZmWExERHNYeA==
kind: Secret
metadata:
  creationTimestamp: &quot;2022-08-05T08:24:27Z&quot;
  finalizers:
  - objectbucket.io/finalizer
  labels:
    bucket-provisioner: rook-ceph.ceph.rook.io-bucket
  name: ceph-delete-bucket
  namespace: rook-ceph
  ownerReferences:
  - apiVersion: objectbucket.io/v1alpha1
    blockOwnerDeletion: true
    controller: true
    kind: ObjectBucketClaim
    name: ceph-delete-bucket
    uid: a8c69ebc-1e4d-477c-97e7-479b532962b3
  resourceVersion: &quot;1282723&quot;
  uid: 1b0af759-7c7d-4fe4-9a80-ea2615fa8fef
type: Opaque

</code></pre>
<p>base64 解密</p>
<pre><code class="language-shell">$ echo Rk9JSjBJNlg0NDVNUVVMVkpGMzc= |base64 -d
FOIJ0I6X445MQULVJF37%

# beiyiwangdejiyi @ beiyiwangdejiyideMacBook-Pro in ~/note-work/hugo on git:main x [14:28:13]
$ echo SVdjaElaeVdUbTNGNkRyZ29UcUQ0R1gzOVlhczR4S1ZmWExERHNYeA== |base64 -d
IWchIZyWTm3F6DrgoTqD4GX39Yas4xKVfXLDDsXx%
</code></pre>
<p>fio --name=sequential-read --directory=/config --rw=read --refill_buffers --bs=4K --size=200M</p>
<pre><code class="language-shell">root@nginx-run-685fdf6467-mdl9v:/# fio --name=sequential-read --directory=/config --rw=read --refill_buffers --bs=4K --size=200M
sequential-read: (g=0): rw=read, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=psync, iodepth=1
fio-3.25
Starting 1 process
sequential-read: Laying out IO file (1 file / 200MiB)

sequential-read: (groupid=0, jobs=1): err= 0: pid=723: Wed Aug 10 06:28:37 2022
  read: IOPS=98.8k, BW=386MiB/s (405MB/s)(200MiB/518msec)
    clat (nsec): min=378, max=86956k, avg=9833.73, stdev=534902.03
     lat (nsec): min=411, max=86956k, avg=9868.39, stdev=534902.42
    clat percentiles (nsec):
     |  1.00th=[     398],  5.00th=[     486], 10.00th=[     532],
     | 20.00th=[     556], 30.00th=[     580], 40.00th=[     604],
     | 50.00th=[     628], 60.00th=[     644], 70.00th=[     668],
     | 80.00th=[     708], 90.00th=[     804], 95.00th=[     932],
     | 99.00th=[   70144], 99.50th=[  102912], 99.90th=[  456704],
     | 99.95th=[ 1253376], 99.99th=[26083328]
   bw (  KiB/s): min=401376, max=401376, per=100.00%, avg=401376.00, stdev= 0.00, samples=1
   iops        : min=100344, max=100344, avg=100344.00, stdev= 0.00, samples=1
  lat (nsec)   : 500=5.72%, 750=80.66%, 1000=9.78%
  lat (usec)   : 2=1.74%, 4=0.06%, 10=0.17%, 20=0.06%, 50=0.11%
  lat (usec)   : 100=1.17%, 250=0.37%, 500=0.07%, 750=0.02%, 1000=0.02%
  lat (msec)   : 2=0.02%, 4=0.01%, 10=0.01%, 20=0.01%, 50=0.01%
  lat (msec)   : 100=0.01%
  cpu          : usr=3.29%, sys=17.02%, ctx=571, majf=0, minf=15
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     issued rwts: total=51200,0,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
   READ: bw=386MiB/s (405MB/s), 386MiB/s-386MiB/s (405MB/s-405MB/s), io=200MiB (210MB), run=518-518msec

root@nginx-run-685fdf6467-mdl9v:/config# fio --name=sequential-read --directory=/config --rw=read --refill_buffers --bs=4K --size=200M
sequential-read: (g=0): rw=read, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=psync, iodepth=1
fio-3.25
Starting 1 process

sequential-read: (groupid=0, jobs=1): err= 0: pid=729: Wed Aug 10 06:30:48 2022
  read: IOPS=344k, BW=1342MiB/s (1407MB/s)(200MiB/149msec)
    clat (nsec): min=375, max=7097.8k, avg=2339.11, stdev=39079.52
     lat (nsec): min=406, max=7097.8k, avg=2372.97, stdev=39080.14
    clat percentiles (nsec):
     |  1.00th=[    406],  5.00th=[    524], 10.00th=[    540],
     | 20.00th=[    564], 30.00th=[    588], 40.00th=[    612],
     | 50.00th=[    628], 60.00th=[    644], 70.00th=[    668],
     | 80.00th=[    700], 90.00th=[    748], 95.00th=[    868],
     | 99.00th=[  67072], 99.50th=[  73216], 99.90th=[ 114176],
     | 99.95th=[ 156672], 99.99th=[1122304]
  lat (nsec)   : 500=2.29%, 750=87.79%, 1000=7.05%
  lat (usec)   : 2=0.96%, 4=0.01%, 10=0.15%, 20=0.04%, 50=0.11%
  lat (usec)   : 100=1.42%, 250=0.15%, 500=0.01%, 750=0.01%, 1000=0.01%
  lat (msec)   : 2=0.02%, 4=0.01%, 10=0.01%
  cpu          : usr=25.68%, sys=49.32%, ctx=335, majf=0, minf=15
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     issued rwts: total=51200,0,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
   READ: bw=1342MiB/s (1407MB/s), 1342MiB/s-1342MiB/s (1407MB/s-1407MB/s), io=200MiB (210MB), run=149-149msec
</code></pre>
<pre><code class="language-shell">root@nginx-run-685fdf6467-mdl9v:/config# fio --name=big-file-multi-read --directory=/config --rw=read --refill_buffers --bs=4K --size=200M --numjobs=6
big-file-multi-read: (g=0): rw=read, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=psync, iodepth=1
...
fio-3.25
Starting 6 processes
big-file-multi-read: Laying out IO file (1 file / 200MiB)
big-file-multi-read: Laying out IO file (1 file / 200MiB)
big-file-multi-read: Laying out IO file (1 file / 200MiB)
big-file-multi-read: Laying out IO file (1 file / 200MiB)
big-file-multi-read: Laying out IO file (1 file / 200MiB)
big-file-multi-read: Laying out IO file (1 file / 200MiB)
Jobs: 2 (f=2): [_(4),R(2)][100.0%][r=264MiB/s][r=67.7k IOPS][eta 00m:00s]
big-file-multi-read: (groupid=0, jobs=1): err= 0: pid=732: Wed Aug 10 06:32:40 2022
  read: IOPS=11.1k, BW=43.5MiB/s (45.6MB/s)(200MiB/4602msec)
    clat (nsec): min=377, max=522247k, avg=89494.70, stdev=4682750.76
     lat (nsec): min=408, max=522247k, avg=89553.19, stdev=4682751.34
    clat percentiles (nsec):
     |  1.00th=[      414],  5.00th=[      516], 10.00th=[      548],
     | 20.00th=[      580], 30.00th=[      620], 40.00th=[      660],
     | 50.00th=[      692], 60.00th=[      732], 70.00th=[      796],
     | 80.00th=[      884], 90.00th=[     1020], 95.00th=[     1192],
     | 99.00th=[    83456], 99.50th=[   218112], 99.90th=[  5144576],
     | 99.95th=[ 20578304], 99.99th=[240123904]
   bw (  KiB/s): min=14080, max=90112, per=18.59%, avg=45625.50, stdev=27571.34, samples=8
   iops        : min= 3520, max=22528, avg=11406.37, stdev=6892.84, samples=8
  lat (nsec)   : 500=3.47%, 750=60.05%, 1000=25.67%
  lat (usec)   : 2=8.49%, 4=0.21%, 10=0.15%, 20=0.08%, 50=0.07%
  lat (usec)   : 100=1.00%, 250=0.33%, 500=0.14%, 750=0.07%, 1000=0.04%
  lat (msec)   : 2=0.06%, 4=0.04%, 10=0.05%, 20=0.01%, 50=0.01%
  lat (msec)   : 100=0.02%, 250=0.01%, 500=0.01%, 750=0.01%
  cpu          : usr=0.59%, sys=2.00%, ctx=671, majf=0, minf=16
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     issued rwts: total=51200,0,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1
big-file-multi-read: (groupid=0, jobs=1): err= 0: pid=733: Wed Aug 10 06:32:40 2022
  read: IOPS=10.7k, BW=41.9MiB/s (43.9MB/s)(200MiB/4776msec)
    clat (nsec): min=376, max=734234k, avg=92901.06, stdev=5934361.60
     lat (nsec): min=411, max=734234k, avg=92951.67, stdev=5934362.28
    clat percentiles (nsec):
     |  1.00th=[      402],  5.00th=[      516], 10.00th=[      548],
     | 20.00th=[      588], 30.00th=[      636], 40.00th=[      684],
     | 50.00th=[      732], 60.00th=[      788], 70.00th=[      860],
     | 80.00th=[      940], 90.00th=[     1080], 95.00th=[     1272],
     | 99.00th=[    91648], 99.50th=[   193536], 99.90th=[  3981312],
     | 99.95th=[ 27131904], 99.99th=[233832448]
   bw (  KiB/s): min= 8192, max=98304, per=19.42%, avg=47655.75, stdev=31431.05, samples=8
   iops        : min= 2048, max=24576, avg=11913.88, stdev=7857.79, samples=8
  lat (nsec)   : 500=3.87%, 750=50.45%, 1000=31.27%
  lat (usec)   : 2=12.03%, 4=0.18%, 10=0.15%, 20=0.07%, 50=0.06%
  lat (usec)   : 100=1.02%, 250=0.48%, 500=0.15%, 750=0.05%, 1000=0.04%
  lat (msec)   : 2=0.05%, 4=0.02%, 10=0.03%, 20=0.02%, 50=0.02%
  lat (msec)   : 100=0.02%, 250=0.01%, 500=0.01%, 750=0.01%
  cpu          : usr=0.44%, sys=2.07%, ctx=845, majf=0, minf=17
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     issued rwts: total=51200,0,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1
big-file-multi-read: (groupid=0, jobs=1): err= 0: pid=734: Wed Aug 10 06:32:40 2022
  read: IOPS=10.9k, BW=42.6MiB/s (44.7MB/s)(200MiB/4696msec)
    clat (nsec): min=379, max=607583k, avg=91313.18, stdev=4982310.93
     lat (nsec): min=412, max=607583k, avg=91361.07, stdev=4982311.06
    clat percentiles (nsec):
     |  1.00th=[      410],  5.00th=[      516], 10.00th=[      548],
     | 20.00th=[      580], 30.00th=[      620], 40.00th=[      660],
     | 50.00th=[      700], 60.00th=[      740], 70.00th=[      804],
     | 80.00th=[      900], 90.00th=[     1048], 95.00th=[     1240],
     | 99.00th=[    78336], 99.50th=[   130560], 99.90th=[  4882432],
     | 99.95th=[ 14483456], 99.99th=[254803968]
   bw (  KiB/s): min= 7680, max=90112, per=17.01%, avg=41739.89, stdev=24407.57, samples=9
   iops        : min= 1920, max=22528, avg=10434.89, stdev=6101.90, samples=9
  lat (nsec)   : 500=3.93%, 750=58.07%, 1000=25.64%
  lat (usec)   : 2=10.13%, 4=0.22%, 10=0.13%, 20=0.04%, 50=0.08%
  lat (usec)   : 100=1.10%, 250=0.34%, 500=0.08%, 750=0.04%, 1000=0.02%
  lat (msec)   : 2=0.04%, 4=0.03%, 10=0.04%, 20=0.02%, 50=0.01%
  lat (msec)   : 100=0.01%, 250=0.01%, 500=0.01%, 750=0.01%
  cpu          : usr=0.72%, sys=1.81%, ctx=502, majf=0, minf=16
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     issued rwts: total=51200,0,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1
big-file-multi-read: (groupid=0, jobs=1): err= 0: pid=735: Wed Aug 10 06:32:40 2022
  read: IOPS=10.6k, BW=41.5MiB/s (43.5MB/s)(200MiB/4822msec)
    clat (nsec): min=374, max=700599k, avg=93757.53, stdev=5099889.71
     lat (nsec): min=413, max=700599k, avg=93803.83, stdev=5099890.00
    clat percentiles (nsec):
     |  1.00th=[      430],  5.00th=[      516], 10.00th=[      540],
     | 20.00th=[      580], 30.00th=[      620], 40.00th=[      660],
     | 50.00th=[      692], 60.00th=[      732], 70.00th=[      804],
     | 80.00th=[      900], 90.00th=[     1048], 95.00th=[     1256],
     | 99.00th=[    91648], 99.50th=[   226304], 99.90th=[  5931008],
     | 99.95th=[ 24248320], 99.99th=[235929600]
   bw (  KiB/s): min= 6520, max=65536, per=15.07%, avg=36989.89, stdev=18379.13, samples=9
   iops        : min= 1630, max=16384, avg=9247.44, stdev=4594.77, samples=9
  lat (nsec)   : 500=3.74%, 750=59.39%, 1000=24.25%
  lat (usec)   : 2=10.19%, 4=0.22%, 10=0.18%, 20=0.08%, 50=0.08%
  lat (usec)   : 100=0.96%, 250=0.43%, 500=0.14%, 750=0.07%, 1000=0.03%
  lat (msec)   : 2=0.06%, 4=0.04%, 10=0.06%, 20=0.02%, 50=0.02%
  lat (msec)   : 100=0.01%, 250=0.02%, 500=0.01%, 750=0.01%
  cpu          : usr=0.21%, sys=2.24%, ctx=874, majf=0, minf=16
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     issued rwts: total=51200,0,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1
big-file-multi-read: (groupid=0, jobs=1): err= 0: pid=736: Wed Aug 10 06:32:40 2022
  read: IOPS=10.2k, BW=39.9MiB/s (41.9MB/s)(200MiB/5008msec)
    clat (nsec): min=377, max=806541k, avg=97234.58, stdev=6320832.41
     lat (nsec): min=414, max=806541k, avg=97345.92, stdev=6320844.03
    clat percentiles (nsec):
     |  1.00th=[      402],  5.00th=[      516], 10.00th=[      540],
     | 20.00th=[      572], 30.00th=[      612], 40.00th=[      652],
     | 50.00th=[      684], 60.00th=[      724], 70.00th=[      772],
     | 80.00th=[      868], 90.00th=[     1032], 95.00th=[     1240],
     | 99.00th=[    80384], 99.50th=[   154624], 99.90th=[  5275648],
     | 99.95th=[ 20054016], 99.99th=[200278016]
   bw (  KiB/s): min= 8192, max=49152, per=12.40%, avg=30434.00, stdev=15445.75, samples=9
   iops        : min= 2048, max=12288, avg=7608.44, stdev=3861.51, samples=9
  lat (nsec)   : 500=3.77%, 750=62.98%, 1000=22.07%
  lat (usec)   : 2=8.67%, 4=0.18%, 10=0.26%, 20=0.12%, 50=0.12%
  lat (usec)   : 100=1.05%, 250=0.40%, 500=0.11%, 750=0.04%, 1000=0.02%
  lat (msec)   : 2=0.05%, 4=0.04%, 10=0.03%, 20=0.03%, 50=0.02%
  lat (msec)   : 100=0.01%, 250=0.01%, 500=0.01%, 750=0.01%, 1000=0.01%
  cpu          : usr=0.46%, sys=1.96%, ctx=787, majf=0, minf=17
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     issued rwts: total=51200,0,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1
big-file-multi-read: (groupid=0, jobs=1): err= 0: pid=737: Wed Aug 10 06:32:40 2022
  read: IOPS=10.3k, BW=40.2MiB/s (42.1MB/s)(200MiB/4977msec)
    clat (nsec): min=378, max=894860k, avg=96613.11, stdev=5799729.12
     lat (nsec): min=413, max=894860k, avg=96658.78, stdev=5799729.19
    clat percentiles (nsec):
     |  1.00th=[      398],  5.00th=[      506], 10.00th=[      540],
     | 20.00th=[      572], 30.00th=[      612], 40.00th=[      644],
     | 50.00th=[      676], 60.00th=[      716], 70.00th=[      764],
     | 80.00th=[      852], 90.00th=[      988], 95.00th=[     1176],
     | 99.00th=[    87552], 99.50th=[   216064], 99.90th=[  6848512],
     | 99.95th=[ 31064064], 99.99th=[231735296]
   bw (  KiB/s): min=16929, max=69632, per=14.42%, avg=35383.25, stdev=17459.47, samples=8
   iops        : min= 4232, max=17408, avg=8845.75, stdev=4364.90, samples=8
  lat (nsec)   : 500=4.66%, 750=63.16%, 1000=22.55%
  lat (usec)   : 2=7.10%, 4=0.20%, 10=0.27%, 20=0.09%, 50=0.11%
  lat (usec)   : 100=0.99%, 250=0.44%, 500=0.12%, 750=0.07%, 1000=0.04%
  lat (msec)   : 2=0.06%, 4=0.04%, 10=0.03%, 20=0.03%, 50=0.01%
  lat (msec)   : 100=0.02%, 250=0.02%, 500=0.01%, 750=0.01%, 1000=0.01%
  cpu          : usr=0.32%, sys=2.05%, ctx=1006, majf=0, minf=17
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     issued rwts: total=51200,0,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
   READ: bw=240MiB/s (251MB/s), 39.9MiB/s-43.5MiB/s (41.9MB/s-45.6MB/s), io=1200MiB (1258MB), run=4602-5008msec


root@nginx-run-685fdf6467-mdl9v:/config# fio --name=big-file-multi-read --directory=/config --rw=read --refill_buffers --bs=4K --size=200M --numjobs=6
big-file-multi-read: (g=0): rw=read, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=psync, iodepth=1
...
fio-3.25
Starting 6 processes
Jobs: 3 (f=3): [_(1),R(1),_(1),R(1),_(1),R(1)][80.0%][r=172MiB/s][r=44.1k IOPS][eta 00m:02s]
big-file-multi-read: (groupid=0, jobs=1): err= 0: pid=740: Wed Aug 10 06:34:00 2022
  read: IOPS=8276, BW=32.3MiB/s (33.9MB/s)(200MiB/6186msec)
    clat (nsec): min=378, max=805881k, avg=120250.60, stdev=7449083.91
     lat (nsec): min=410, max=805881k, avg=120301.98, stdev=7449084.14
    clat percentiles (nsec):
     |  1.00th=[      422],  5.00th=[      532], 10.00th=[      548],
     | 20.00th=[      580], 30.00th=[      612], 40.00th=[      636],
     | 50.00th=[      660], 60.00th=[      684], 70.00th=[      716],
     | 80.00th=[      748], 90.00th=[      860], 95.00th=[      996],
     | 99.00th=[    77312], 99.50th=[   132096], 99.90th=[  1318912],
     | 99.95th=[ 10289152], 99.99th=[434110464]
   bw (  KiB/s): min= 8192, max=65536, per=23.93%, avg=35045.82, stdev=25507.11, samples=11
   iops        : min= 2048, max=16384, avg=8761.45, stdev=6376.78, samples=11
  lat (nsec)   : 500=2.40%, 750=77.33%, 1000=15.36%
  lat (usec)   : 2=2.64%, 4=0.06%, 10=0.18%, 20=0.11%, 50=0.13%
  lat (usec)   : 100=1.11%, 250=0.39%, 500=0.09%, 750=0.05%, 1000=0.03%
  lat (msec)   : 2=0.03%, 4=0.02%, 10=0.01%, 20=0.01%, 50=0.01%
  lat (msec)   : 100=0.01%, 250=0.01%, 500=0.01%, 750=0.01%, 1000=0.01%
  cpu          : usr=0.34%, sys=1.62%, ctx=845, majf=0, minf=14
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     issued rwts: total=51200,0,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1
big-file-multi-read: (groupid=0, jobs=1): err= 0: pid=741: Wed Aug 10 06:34:00 2022
  read: IOPS=6102, BW=23.8MiB/s (24.0MB/s)(200MiB/8390msec)
    clat (nsec): min=379, max=1190.5M, avg=162758.58, stdev=11051920.43
     lat (nsec): min=413, max=1190.5M, avg=162807.90, stdev=11051920.69
    clat percentiles (nsec):
     |  1.00th=[      410],  5.00th=[      524], 10.00th=[      548],
     | 20.00th=[      572], 30.00th=[      604], 40.00th=[      636],
     | 50.00th=[      668], 60.00th=[      700], 70.00th=[      724],
     | 80.00th=[      764], 90.00th=[      876], 95.00th=[     1004],
     | 99.00th=[    78336], 99.50th=[   156672], 99.90th=[  1073152],
     | 99.95th=[  5275648], 99.99th=[616562688]
   bw (  KiB/s): min=  512, max=73728, per=20.69%, avg=30307.20, stdev=21673.33, samples=10
   iops        : min=  128, max=18432, avg=7576.80, stdev=5418.33, samples=10
  lat (nsec)   : 500=2.76%, 750=73.76%, 1000=18.35%
  lat (usec)   : 2=2.79%, 4=0.04%, 10=0.22%, 20=0.13%, 50=0.14%
  lat (usec)   : 100=1.05%, 250=0.42%, 500=0.14%, 750=0.05%, 1000=0.03%
  lat (msec)   : 2=0.04%, 4=0.02%, 10=0.02%, 20=0.01%, 100=0.01%
  lat (msec)   : 250=0.01%, 500=0.01%, 750=0.01%, 2000=0.01%
  cpu          : usr=0.33%, sys=1.10%, ctx=982, majf=0, minf=16
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     issued rwts: total=51200,0,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1
big-file-multi-read: (groupid=0, jobs=1): err= 0: pid=742: Wed Aug 10 06:34:00 2022
  read: IOPS=6906, BW=26.0MiB/s (28.3MB/s)(200MiB/7413msec)
    clat (nsec): min=380, max=1034.3M, avg=144218.03, stdev=9148025.05
     lat (nsec): min=414, max=1034.3M, avg=144254.80, stdev=9148025.00
    clat percentiles (nsec):
     |  1.00th=[      406],  5.00th=[      524], 10.00th=[      548],
     | 20.00th=[      564], 30.00th=[      596], 40.00th=[      620],
     | 50.00th=[      652], 60.00th=[      676], 70.00th=[      708],
     | 80.00th=[      748], 90.00th=[      860], 95.00th=[      988],
     | 99.00th=[    78336], 99.50th=[   146432], 99.90th=[  1253376],
     | 99.95th=[  4620288], 99.99th=[522190848]
   bw (  KiB/s): min=16384, max=73728, per=26.85%, avg=39318.40, stdev=23491.33, samples=10
   iops        : min= 4096, max=18432, avg=9829.60, stdev=5872.83, samples=10
  lat (nsec)   : 500=3.29%, 750=76.66%, 1000=15.22%
  lat (usec)   : 2=2.43%, 4=0.10%, 10=0.23%, 20=0.12%, 50=0.12%
  lat (usec)   : 100=1.13%, 250=0.37%, 500=0.13%, 750=0.05%, 1000=0.03%
  lat (msec)   : 2=0.04%, 4=0.02%, 10=0.01%, 20=0.01%, 50=0.01%
  lat (msec)   : 100=0.01%, 250=0.01%, 500=0.01%, 750=0.01%, 1000=0.01%
  lat (msec)   : 2000=0.01%
  cpu          : usr=0.32%, sys=1.32%, ctx=864, majf=0, minf=15
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     issued rwts: total=51200,0,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1
big-file-multi-read: (groupid=0, jobs=1): err= 0: pid=743: Wed Aug 10 06:34:00 2022
  read: IOPS=6106, BW=23.9MiB/s (25.0MB/s)(200MiB/8385msec)
    clat (nsec): min=380, max=1507.9M, avg=162772.24, stdev=13174473.96
     lat (nsec): min=414, max=1507.9M, avg=162810.08, stdev=13174473.94
    clat percentiles (nsec):
     |  1.00th=[      398],  5.00th=[      510], 10.00th=[      540],
     | 20.00th=[      572], 30.00th=[      604], 40.00th=[      636],
     | 50.00th=[      668], 60.00th=[      692], 70.00th=[      724],
     | 80.00th=[      764], 90.00th=[      876], 95.00th=[     1012],
     | 99.00th=[    79360], 99.50th=[   136192], 99.90th=[   897024],
     | 99.95th=[  2506752], 99.99th=[434110464]
   bw (  KiB/s): min=    8, max=81920, per=20.70%, avg=30310.40, stdev=22461.38, samples=10
   iops        : min=    2, max=20480, avg=7577.60, stdev=5615.35, samples=10
  lat (nsec)   : 500=4.29%, 750=73.14%, 1000=17.30%
  lat (usec)   : 2=2.94%, 4=0.04%, 10=0.22%, 20=0.07%, 50=0.19%
  lat (usec)   : 100=1.10%, 250=0.44%, 500=0.11%, 750=0.05%, 1000=0.02%
  lat (msec)   : 2=0.03%, 4=0.01%, 10=0.01%, 20=0.01%, 50=0.01%
  lat (msec)   : 100=0.01%, 250=0.01%, 500=0.01%, 2000=0.01%
  cpu          : usr=0.05%, sys=1.40%, ctx=993, majf=0, minf=14
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     issued rwts: total=51200,0,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1
big-file-multi-read: (groupid=0, jobs=1): err= 0: pid=744: Wed Aug 10 06:34:00 2022
  read: IOPS=6911, BW=26.0MiB/s (28.3MB/s)(200MiB/7408msec)
    clat (nsec): min=381, max=1179.3M, avg=143994.58, stdev=11079777.48
     lat (nsec): min=413, max=1179.3M, avg=144029.70, stdev=11079777.45
    clat percentiles (nsec):
     |  1.00th=[      406],  5.00th=[      516], 10.00th=[      540],
     | 20.00th=[      564], 30.00th=[      580], 40.00th=[      612],
     | 50.00th=[      636], 60.00th=[      668], 70.00th=[      692],
     | 80.00th=[      732], 90.00th=[      836], 95.00th=[      956],
     | 99.00th=[    76288], 99.50th=[   111104], 99.90th=[   995328],
     | 99.95th=[  3227648], 99.99th=[742391808]
   bw (  KiB/s): min= 5040, max=73728, per=22.93%, avg=33587.20, stdev=27492.28, samples=10
   iops        : min= 1260, max=18432, avg=8396.80, stdev=6873.07, samples=10
  lat (nsec)   : 500=3.81%, 750=78.93%, 1000=13.08%
  lat (usec)   : 2=2.02%, 4=0.02%, 10=0.21%, 20=0.07%, 50=0.12%
  lat (usec)   : 100=1.15%, 250=0.36%, 500=0.07%, 750=0.04%, 1000=0.02%
  lat (msec)   : 2=0.04%, 4=0.02%, 10=0.01%, 20=0.01%, 50=0.01%
  lat (msec)   : 250=0.01%, 500=0.01%, 750=0.01%, 1000=0.01%, 2000=0.01%
  cpu          : usr=0.26%, sys=1.35%, ctx=724, majf=0, minf=15
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     issued rwts: total=51200,0,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1
big-file-multi-read: (groupid=0, jobs=1): err= 0: pid=745: Wed Aug 10 06:34:00 2022
  read: IOPS=6238, BW=24.4MiB/s (25.6MB/s)(200MiB/8207msec)
    clat (nsec): min=379, max=1170.8M, avg=159639.78, stdev=10672683.50
     lat (nsec): min=413, max=1170.8M, avg=159675.27, stdev=10672683.47
    clat percentiles (nsec):
     |  1.00th=[      410],  5.00th=[      516], 10.00th=[      540],
     | 20.00th=[      572], 30.00th=[      596], 40.00th=[      628],
     | 50.00th=[      652], 60.00th=[      684], 70.00th=[      716],
     | 80.00th=[      764], 90.00th=[      876], 95.00th=[     1012],
     | 99.00th=[    77312], 99.50th=[   156672], 99.90th=[  1810432],
     | 99.95th=[  5865472], 99.99th=[616562688]
   bw (  KiB/s): min= 6400, max=74752, per=18.50%, avg=27096.62, stdev=22310.47, samples=13
   iops        : min= 1600, max=18688, avg=6774.15, stdev=5577.62, samples=13
  lat (nsec)   : 500=4.00%, 750=74.22%, 1000=16.52%
  lat (usec)   : 2=3.01%, 4=0.05%, 10=0.19%, 20=0.07%, 50=0.11%
  lat (usec)   : 100=1.06%, 250=0.40%, 500=0.14%, 750=0.05%, 1000=0.05%
  lat (msec)   : 2=0.04%, 4=0.03%, 10=0.03%, 20=0.01%, 50=0.01%
  lat (msec)   : 100=0.01%, 250=0.01%, 500=0.01%, 750=0.01%, 1000=0.01%
  lat (msec)   : 2000=0.01%
  cpu          : usr=0.26%, sys=1.22%, ctx=949, majf=0, minf=15
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     issued rwts: total=51200,0,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
   READ: bw=143MiB/s (150MB/s), 23.8MiB/s-32.3MiB/s (24.0MB/s-33.9MB/s), io=1200MiB (1258MB), run=6186-8390msec
</code></pre>
<p>fio --name=sequential-write --directory=/config --rw=write --refill_buffers --bs=4K --size=200M --end_fsync=1</p>
<p>fio --name=big-file-multi-read --directory=$PWD --rw=read --refill_buffers --bs=4K --size=200M --numjobs=6</p>
<p>fio --name=sequential-write --directory=/config --rw=write --refill_buffers --bs=4K --size=200M --end_fsync=1</p>
<pre><code class="language-shell">root@nginx-run-685fdf6467-mdl9v:/config# fio --name=sequential-write --directory=/config --rw=write --refill_buffers --bs=4K --size=200M --end_fsync=1
sequential-write: (g=0): rw=write, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=psync, iodepth=1
fio-3.25
Starting 1 process
sequential-write: Laying out IO file (1 file / 200MiB)
Jobs: 1 (f=1)
sequential-write: (groupid=0, jobs=1): err= 0: pid=756: Wed Aug 10 06:39:40 2022
  write: IOPS=33.6k, BW=131MiB/s (138MB/s)(200MiB/1525msec); 0 zone resets
    clat (usec): min=7, max=7420, avg=27.69, stdev=125.85
     lat (usec): min=7, max=7420, avg=27.76, stdev=125.85
    clat percentiles (usec):
     |  1.00th=[    8],  5.00th=[    9], 10.00th=[   11], 20.00th=[   12],
     | 30.00th=[   20], 40.00th=[   21], 50.00th=[   22], 60.00th=[   22],
     | 70.00th=[   23], 80.00th=[   24], 90.00th=[   28], 95.00th=[   37],
     | 99.00th=[  118], 99.50th=[  285], 99.90th=[ 1860], 99.95th=[ 3097],
     | 99.99th=[ 4752]
   bw (  KiB/s): min=132286, max=138088, per=100.00%, avg=135187.00, stdev=4102.63, samples=2
   iops        : min=33071, max=34522, avg=33796.50, stdev=1026.01, samples=2
  lat (usec)   : 10=9.54%, 20=24.43%, 50=63.08%, 100=1.75%, 250=0.66%
  lat (usec)   : 500=0.22%, 750=0.09%, 1000=0.05%
  lat (msec)   : 2=0.10%, 4=0.07%, 10=0.03%
  cpu          : usr=9.84%, sys=31.04%, ctx=51905, majf=0, minf=12
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     issued rwts: total=0,51200,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
  WRITE: bw=131MiB/s (138MB/s), 131MiB/s-131MiB/s (138MB/s-138MB/s), io=200MiB (210MB), run=1525-1525msec



root@nginx-run-685fdf6467-mdl9v:/config# fio --name=sequential-write --directory=/config --rw=write --refill_buffers --bs=4K --size=200M --end_fsync=1
sequential-write: (g=0): rw=write, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=psync, iodepth=1
fio-3.25
Starting 1 process
Jobs: 1 (f=1)
sequential-write: (groupid=0, jobs=1): err= 0: pid=759: Wed Aug 10 06:41:20 2022
  write: IOPS=31.3k, BW=122MiB/s (128MB/s)(200MiB/1637msec); 0 zone resets
    clat (usec): min=7, max=9234, avg=30.16, stdev=137.54
     lat (usec): min=7, max=9234, avg=30.21, stdev=137.54
    clat percentiles (usec):
     |  1.00th=[    8],  5.00th=[    9], 10.00th=[   11], 20.00th=[   18],
     | 30.00th=[   20], 40.00th=[   21], 50.00th=[   22], 60.00th=[   22],
     | 70.00th=[   23], 80.00th=[   24], 90.00th=[   29], 95.00th=[   41],
     | 99.00th=[  147], 99.50th=[  379], 99.90th=[ 2311], 99.95th=[ 3064],
     | 99.99th=[ 4490]
   bw (  KiB/s): min=119544, max=132640, per=100.00%, avg=128018.67, stdev=7349.32, samples=3
   iops        : min=29886, max=33160, avg=32004.67, stdev=1837.33, samples=3
  lat (usec)   : 10=7.32%, 20=25.16%, 50=63.95%, 100=2.08%, 250=0.85%
  lat (usec)   : 500=0.23%, 750=0.09%, 1000=0.08%
  lat (msec)   : 2=0.12%, 4=0.11%, 10=0.02%
  cpu          : usr=7.21%, sys=32.64%, ctx=51971, majf=0, minf=13
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
     issued rwts: total=0,51200,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
  WRITE: bw=122MiB/s (128MB/s), 122MiB/s-122MiB/s (128MB/s-128MB/s), io=200MiB (210MB), run=1637-1637msec
</code></pre>
<p>fio --name=big-file-multi-write --directory=/config --rw=write --refill_buffers --bs=4K --size=200M --numjobs=6 --end_fsync=1</p>
<p>fio -filename=/config/fio.img -direct=1 -iodepth 32 -thread -rw=randread -ioengine=libaio -bs=4k -size=200m -numjobs=2 -runtime=60 -group_reporting -name=mytest</p>
<p>固态宿主机：</p>
<pre><code class="language-shell">[ucloud] root@node1:/var/jfsCache# fio --name=big-file-multi-read --directory=$PWD --rw=read --refill_buffers --bs=4K --size=200M --numjobs=6
big-file-multi-read: (g=0): rw=read, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=psync, iodepth=1
...
fio-3.16
Starting 6 processes
Jobs: 6 (f=6): [R(6)][88.9%][r=130MiB/s][r=33.2k IOPS][eta 00m:01s]
big-file-multi-read: (groupid=0, jobs=1): err= 0: pid=225237: Fri Aug 12 14:09:04 2022
  read: IOPS=5925, BW=23.1MiB/s (24.3MB/s)(200MiB/8641msec)
    clat (nsec): min=434, max=21757k, avg=168221.11, stdev=1662876.10
     lat (nsec): min=471, max=21757k, avg=168260.51, stdev=1662876.63
    clat percentiles (nsec):
     |  1.00th=[     524],  5.00th=[     540], 10.00th=[     548],
     | 20.00th=[     564], 30.00th=[     572], 40.00th=[     580],
     | 50.00th=[     596], 60.00th=[     612], 70.00th=[     628],
     | 80.00th=[     660], 90.00th=[     732], 95.00th=[     884],
     | 99.00th=[ 3948544], 99.50th=[19005440], 99.90th=[20054016],
     | 99.95th=[20054016], 99.99th=[20054016]
</code></pre>
<p>内存宿主机：</p>
<pre><code class="language-shell">[ucloud] root@node1:/var/jfsCache# fio --name=big-file-multi-read --directory=$PWD --rw=read --refill_buffers --bs=4K --size=200M --numjobs=6
big-file-multi-read: (g=0): rw=read, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=psync, iodepth=1
...
fio-3.16
Starting 6 processes

big-file-multi-read: (groupid=0, jobs=1): err= 0: pid=12095: Fri Aug 12 15:05:27 2022
  read: IOPS=966k, BW=3774MiB/s (3957MB/s)(200MiB/53msec)
    clat (nsec): min=520, max=221610, avg=757.38, stdev=2561.09
     lat (nsec): min=553, max=221646, avg=792.50, stdev=2561.18
    clat percentiles (nsec):
     |  1.00th=[   540],  5.00th=[   556], 10.00th=[   556], 20.00th=[   564],
     | 30.00th=[   572], 40.00th=[   580], 50.00th=[   596], 60.00th=[   612],
     | 70.00th=[   644], 80.00th=[   724], 90.00th=[   908], 95.00th=[   940],
     | 99.00th=[  3344], 99.50th=[  3728], 99.90th=[ 19072], 99.95th=[ 43264],
     | 99.99th=[115200]
</code></pre>
<p>fio --name=small-file-multi-read \
    --directory=/config \
    --rw=read --file_service_type=sequential \
    --bs=4k --filesize=4k --nrfiles=500 \
    --numjobs=2</p>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="页脚" >
      
        
        <a href="../../network/4-network-docs/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 科学上网" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              科学上网
            </div>
          </div>
        </a>
      
      
        
        <a href="../osd/" class="md-footer__link md-footer__link--next" aria-label="下一页: osd 性能测试" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              osd 性能测试
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 lixie
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/cnych" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://hub.docker.com/r/cnych/" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/cnych" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://instagram.com/cnych" target="_blank" rel="noopener" title="instagram.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.expand", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\s\\-\uff0c\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
        <script src="../../js/extra.js"></script>
      
        <script src="../../js/baidu-tongji.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
    
  </body>
</html>